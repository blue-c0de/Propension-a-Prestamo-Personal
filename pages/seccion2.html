<!-- ========================= -->
<!--   SETUP BASE DE DATOS    -->
<!--   (se ejecuta una vez)   -->
<!-- ========================= -->




<!-- TITULAR PRINCIPAL -->
<header class="section-header">
  <p class="section-kicker">Fase 2</p>
  <h2>Organización y Entendimiento de Datos</h2>
  <p class="section-subtitle">
    Para garantizar una correcta gestión y organización de la información del proyecto, se creó una 
    base de datos relacional en SQLite. 
  </p>
</header>

<div class="section-block">

<!-- ===================================================== -->
<!--                      2.1 BASES DE DATOS               -->
<!-- ===================================================== -->

<section class="card">
  <h3>Trabajo con Bases de Datos</h3>
  <div class="tech-grid">
      <div class="data-item">
          <h4>Creación de la tabla</h4>
          <pre><code>CREATE TABLE clientes_prestamo (
            id_cliente INT PRIMARY KEY,
            edad INT,
            experiencia INT,
            ingresos INT,
            codigo_postal INT,
            familia INT,
            saldo_promedio FLOAT,
            educacion INT,
            hipotecario INT,
            acepto_prestamo INT,
            cuenta_valores INT,
            cuenta_plazo_fijo INT,
            uso_banca_online INT,
            tarjeta_credito INT
        );</code></pre>

<!-- ===================================================== -->
<!--                CONSULTA 2                             -->
<!-- ===================================================== -->

        <h4>2) Ingresos promedio según aceptación</h4>
      
        <pre><code>SELECT acepto_prestamo,
             AVG(ingresos) AS ingresos_promedio
      FROM clientes_prestamo
      GROUP BY acepto_prestamo;</code></pre>
      
        <div class="terminal">
<div class="chunk" id="unnamed-chunk-1"><div class="rcode"><div class="output"><pre class="knitr r">## &lt;pre&gt;
##  
## 
## Aceptó.Préstamo    Ingreso.Promedio..miles.USD.
## ----------------  -----------------------------
## NO                                     66.23739
## SÍ                                    144.74583 
## &lt;/pre&gt;
</pre></div>
</div></div>
        </div>  
      </div>
      <div class="data-item">
<!-- ===================================================== -->
<!--                CONSULTA 1                             -->
<!-- ===================================================== -->
        <h4>1) Distribución de aceptación del préstamo</h4>

        <pre><code>SELECT acepto_prestamo, COUNT(*) AS total_clientes
      FROM clientes_prestamo
      GROUP BY acepto_prestamo;</code></pre>
      
        <div class="terminal">
<div class="chunk" id="unnamed-chunk-2"><div class="rcode"><div class="output"><pre class="knitr r">## &lt;pre&gt;
##  
## 
## Aceptó.Préstamo    Total.Clientes
## ----------------  ---------------
## NO                           4520
## SÍ                            480 
## &lt;/pre&gt;
</pre></div>
</div></div>
        </div>

<!-- ===================================================== -->
<!--                CONSULTA 3                             -->
<!-- ===================================================== -->
        <h4>3) Uso de banca online y aceptación del préstamo</h4>
      
        <pre><code>SELECT uso_banca_online,
             COUNT(*) AS total_clientes,
             SUM(acepto_prestamo) AS aceptaron,
             SUM(acepto_prestamo)*1.0/COUNT(*) AS tasa_aceptacion
      FROM clientes_prestamo
      GROUP BY uso_banca_online;</code></pre>
      
        <div class="terminal">
<div class="chunk" id="unnamed-chunk-3"><div class="rcode"><div class="output"><pre class="knitr r">## &lt;pre&gt;
##  
## 
## Usa.Banca.Online    Total.Clientes   Aceptaron   Tasa.Aceptación
## -----------------  ---------------  ----------  ----------------
## NO                            2016         189         0.0937500
## SÍ                            2984         291         0.0975201 
## &lt;/pre&gt;
</pre></div>
</div></div>
        </div>
      </div>
    </div>
    
    
<!-- ===================================================== -->
<!--                CONSULTA 4                             -->
<!-- ===================================================== -->
    <h4>4) Hipoteca y probabilidad de aceptar el préstamo</h4>
  
    <pre><code>SELECT hipotecario,
         COUNT(*) AS total_clientes,
         SUM(acepto_prestamo) AS aceptaron,
         SUM(acepto_prestamo)*1.0/COUNT(*) AS tasa_aceptacion
  FROM clientes_prestamo
  GROUP BY hipotecario;</code></pre>
  
  <blockquote class="quote-business-red">
      Tiene.Hipoteca: Valor de hipoteca, si existiera. ($000)
    </blockquote>
  
    <div class="terminal">
  

  
      <!-- TABLA 10 FILAS -->
      <div id="tabla3_10">
        <pre>
<div class="chunk" id="unnamed-chunk-5"><div class="rcode"><div class="output"><pre class="knitr r">## 
## 
##  Tiene.Hipoteca   Total.Clientes   Aceptaron   Tasa.Aceptación
## ---------------  ---------------  ----------  ----------------
##               0             3462         312         0.0901213
##              75                8           1         0.1250000
##              76               12           1         0.0833333
##              77                4           0         0.0000000
##              78               15           0         0.0000000
##              79               11           0         0.0000000
##              80                7           0         0.0000000
##              81               13           1         0.0769231
##              82               10           1         0.1000000
##              83               16           0         0.0000000
</pre></div>
</div></div>
        </pre>
      </div>
  
      <!-- TABLA COMPLETA OCULTA -->
      <div id="tabla3_full" style="display:none;">
        <pre>
<div class="chunk" id="unnamed-chunk-6"><div class="rcode"><div class="output"><pre class="knitr r">## 
## 
##  Tiene.Hipoteca   Total.Clientes   Aceptaron   Tasa.Aceptación
## ---------------  ---------------  ----------  ----------------
##               0             3462         312         0.0901213
##              75                8           1         0.1250000
##              76               12           1         0.0833333
##              77                4           0         0.0000000
##              78               15           0         0.0000000
##              79               11           0         0.0000000
##              80                7           0         0.0000000
##              81               13           1         0.0769231
##              82               10           1         0.1000000
##              83               16           0         0.0000000
##              84               11           1         0.0909091
##              85                7           0         0.0000000
##              86               11           2         0.1818182
##              87               14           0         0.0000000
##              88                9           1         0.1111111
##              89               16           0         0.0000000
##              90               15           0         0.0000000
##              91               16           1         0.0625000
##              92                4           0         0.0000000
##              93                4           0         0.0000000
##              94               14           1         0.0714286
##              95               11           0         0.0000000
##              96                7           0         0.0000000
##              97               12           1         0.0833333
##              98               17           0         0.0000000
##              99                6           2         0.3333333
##             100               12           0         0.0000000
##             101               14           0         0.0000000
##             102               15           0         0.0000000
##             103               16           0         0.0000000
##             104               14           0         0.0000000
##             105                8           0         0.0000000
##             106               13           2         0.1538462
##             107                6           0         0.0000000
##             108               10           0         0.0000000
##             109               13           0         0.0000000
##             110                8           0         0.0000000
##             111               11           2         0.1818182
##             112               13           0         0.0000000
##             113               10           0         0.0000000
##             114                8           0         0.0000000
##             115               11           2         0.1818182
##             116               13           0         0.0000000
##             117               10           0         0.0000000
##             118               14           1         0.0714286
##             119               16           1         0.0625000
##             120               12           2         0.1666667
##             121               12           1         0.0833333
##             122                8           0         0.0000000
##             123                9           1         0.1111111
##             124                7           0         0.0000000
##             125                6           0         0.0000000
##             126                7           0         0.0000000
##             127                7           0         0.0000000
##             128                9           0         0.0000000
##             129                7           0         0.0000000
##             130                6           0         0.0000000
##             131               14           0         0.0000000
##             132                8           1         0.1250000
##             133                3           0         0.0000000
##             134                6           1         0.1666667
##             135               10           0         0.0000000
##             136                6           0         0.0000000
##             137               11           0         0.0000000
##             138                8           1         0.1250000
##             139                4           0         0.0000000
##             140                8           1         0.1250000
##             141                6           0         0.0000000
##             142               10           1         0.1000000
##             143                3           0         0.0000000
##             144               13           1         0.0769231
##             145                6           0         0.0000000
##             146                9           1         0.1111111
##             147                8           1         0.1250000
##             148                9           0         0.0000000
##             149                9           2         0.2222222
##             150                6           1         0.1666667
##             151               10           0         0.0000000
##             152                4           0         0.0000000
##             153               11           0         0.0000000
##             154                7           0         0.0000000
##             155                6           0         0.0000000
##             156                5           0         0.0000000
##             157                8           0         0.0000000
##             158               11           1         0.0909091
##             159                9           0         0.0000000
##             160                3           0         0.0000000
##             161               10           1         0.1000000
##             162                4           0         0.0000000
##             163                6           1         0.1666667
##             164                8           0         0.0000000
##             165                3           0         0.0000000
##             166                9           0         0.0000000
##             167                9           1         0.1111111
##             168                3           0         0.0000000
##             169                8           0         0.0000000
##             170                8           1         0.1250000
##             171                5           1         0.2000000
##             172                5           0         0.0000000
##             173                1           0         0.0000000
##             174                8           0         0.0000000
##             175                4           1         0.2500000
##             176                3           1         0.3333333
##             177                3           0         0.0000000
##             178                5           0         0.0000000
##             179                4           0         0.0000000
##             180                5           0         0.0000000
##             181                4           0         0.0000000
##             182                6           0         0.0000000
##             183                2           1         0.5000000
##             184               11           2         0.1818182
##             185               12           0         0.0000000
##             186                3           0         0.0000000
##             187                6           0         0.0000000
##             188                5           0         0.0000000
##             189                4           0         0.0000000
##             190                4           0         0.0000000
##             191                1           0         0.0000000
##             192                6           1         0.1666667
##             193                7           0         0.0000000
##             194                8           1         0.1250000
##             195                1           0         0.0000000
##             196                7           0         0.0000000
##             197                3           1         0.3333333
##             198                5           2         0.4000000
##             199                4           0         0.0000000
##             200                4           0         0.0000000
##             201                2           0         0.0000000
##             202                2           0         0.0000000
##             203                4           1         0.2500000
##             204                7           1         0.1428571
##             205                8           1         0.1250000
##             206                1           0         0.0000000
##             207                8           0         0.0000000
##             208                3           0         0.0000000
##             209                5           2         0.4000000
##             210                1           1         1.0000000
##             211                4           1         0.2500000
##             212                5           1         0.2000000
##             213                3           1         0.3333333
##             214                3           0         0.0000000
##             215                3           0         0.0000000
##             216                3           1         0.3333333
##             217                5           0         0.0000000
##             218                8           0         0.0000000
##             219                7           0         0.0000000
##             220                5           0         0.0000000
##             221                9           2         0.2222222
##             222                2           0         0.0000000
##             223                3           0         0.0000000
##             224                4           0         0.0000000
##             225                2           0         0.0000000
##             226                3           0         0.0000000
##             227                5           1         0.2000000
##             228                3           0         0.0000000
##             229                7           2         0.2857143
##             230                7           0         0.0000000
##             231                4           1         0.2500000
##             232                4           0         0.0000000
##             233                2           0         0.0000000
##             234                2           1         0.5000000
##             235                1           0         0.0000000
##             236                6           0         0.0000000
##             237                1           1         1.0000000
##             238                3           0         0.0000000
##             239                3           0         0.0000000
##             240                6           1         0.1666667
##             241                4           0         0.0000000
##             242                3           0         0.0000000
##             243                2           0         0.0000000
##             244                4           0         0.0000000
##             245                4           0         0.0000000
##             246                2           1         0.5000000
##             247                4           0         0.0000000
##             248                3           0         0.0000000
##             249                7           1         0.1428571
##             250                2           0         0.0000000
##             251                6           2         0.3333333
##             252                2           0         0.0000000
##             253                1           1         1.0000000
##             255                3           1         0.3333333
##             256                5           0         0.0000000
##             257                3           0         0.0000000
##             258                1           0         0.0000000
##             259                2           1         0.5000000
##             260                3           1         0.3333333
##             262                2           0         0.0000000
##             263                3           0         0.0000000
##             264                3           0         0.0000000
##             265                1           0         0.0000000
##             266                2           1         0.5000000
##             267                2           0         0.0000000
##             268                3           0         0.0000000
##             270                3           0         0.0000000
##             271                2           0         0.0000000
##             272                5           1         0.2000000
##             273                1           0         0.0000000
##             275                3           0         0.0000000
##             276                2           0         0.0000000
##             277                3           1         0.3333333
##             278                1           0         0.0000000
##             280                2           0         0.0000000
##             281                1           1         1.0000000
##             282                3           3         1.0000000
##             283                1           0         0.0000000
##             284                1           0         0.0000000
##             285                3           0         0.0000000
##             286                1           0         0.0000000
##             287                2           0         0.0000000
##             289                2           0         0.0000000
##             290                1           0         0.0000000
##             292                2           1         0.5000000
##             293                2           0         0.0000000
##             294                5           2         0.4000000
##             295                1           1         1.0000000
##             296                1           0         0.0000000
##             297                4           1         0.2500000
##             298                1           0         0.0000000
##             299                2           1         0.5000000
##             300                1           0         0.0000000
##             301                5           5         1.0000000
##             302                1           0         0.0000000
##             303                2           0         0.0000000
##             304                2           1         0.5000000
##             305                3           1         0.3333333
##             306                2           0         0.0000000
##             307                5           2         0.4000000
##             308                3           1         0.3333333
##             309                2           0         0.0000000
##             310                3           1         0.3333333
##             311                1           0         0.0000000
##             312                2           1         0.5000000
##             313                2           0         0.0000000
##             314                2           0         0.0000000
##             315                3           1         0.3333333
##             318                1           1         1.0000000
##             319                3           1         0.3333333
##             321                1           0         0.0000000
##             322                2           0         0.0000000
##             323                3           0         0.0000000
##             325                3           1         0.3333333
##             326                1           0         0.0000000
##             327                3           2         0.6666667
##             328                3           0         0.0000000
##             329                3           1         0.3333333
##             330                2           0         0.0000000
##             331                1           0         0.0000000
##             333                3           0         0.0000000
##             334                1           0         0.0000000
##             336                1           0         0.0000000
##             337                1           0         0.0000000
##             341                3           0         0.0000000
##             342                4           3         0.7500000
##             343                1           1         1.0000000
##             344                1           0         0.0000000
##             345                1           0         0.0000000
##             351                1           1         1.0000000
##             352                3           1         0.3333333
##             353                1           0         0.0000000
##             354                2           1         0.5000000
##             355                1           0         0.0000000
##             357                2           1         0.5000000
##             358                2           1         0.5000000
##             359                2           1         0.5000000
##             360                1           0         0.0000000
##             361                1           0         0.0000000
##             364                2           1         0.5000000
##             366                3           0         0.0000000
##             368                2           1         0.5000000
##             372                2           2         1.0000000
##             373                1           1         1.0000000
##             374                1           1         1.0000000
##             378                1           1         1.0000000
##             380                3           1         0.3333333
##             381                1           0         0.0000000
##             382                1           0         0.0000000
##             383                1           0         0.0000000
##             385                1           0         0.0000000
##             389                1           0         0.0000000
##             391                1           1         1.0000000
##             392                2           0         0.0000000
##             394                2           0         0.0000000
##             396                1           0         0.0000000
##             397                2           0         0.0000000
##             398                1           0         0.0000000
##             400                3           2         0.6666667
##             402                2           0         0.0000000
##             403                1           0         0.0000000
##             405                1           0         0.0000000
##             406                1           0         0.0000000
##             408                2           0         0.0000000
##             410                1           1         1.0000000
##             412                1           1         1.0000000
##             415                1           0         0.0000000
##             416                1           1         1.0000000
##             419                1           0         0.0000000
##             421                1           1         1.0000000
##             422                3           2         0.6666667
##             427                2           1         0.5000000
##             428                3           2         0.6666667
##             429                1           0         0.0000000
##             431                1           1         1.0000000
##             432                1           1         1.0000000
##             433                1           0         0.0000000
##             437                2           1         0.5000000
##             442                2           1         0.5000000
##             446                1           1         1.0000000
##             449                2           1         0.5000000
##             452                1           0         0.0000000
##             455                2           0         0.0000000
##             458                1           0         0.0000000
##             461                1           0         0.0000000
##             464                1           0         0.0000000
##             466                1           1         1.0000000
##             467                1           1         1.0000000
##             470                1           0         0.0000000
##             475                1           0         0.0000000
##             477                1           1         1.0000000
##             481                1           0         0.0000000
##             483                1           1         1.0000000
##             485                1           1         1.0000000
##             496                1           0         0.0000000
##             500                1           0         0.0000000
##             505                1           0         0.0000000
##             508                1           0         0.0000000
##             509                1           0         0.0000000
##             522                1           1         1.0000000
##             524                1           0         0.0000000
##             535                1           1         1.0000000
##             541                1           1         1.0000000
##             547                1           1         1.0000000
##             550                1           0         0.0000000
##             553                1           0         0.0000000
##             565                2           1         0.5000000
##             567                1           1         1.0000000
##             569                1           1         1.0000000
##             571                1           1         1.0000000
##             577                1           1         1.0000000
##             581                1           1         1.0000000
##             582                1           1         1.0000000
##             587                1           1         1.0000000
##             589                1           1         1.0000000
##             590                1           1         1.0000000
##             601                1           0         0.0000000
##             612                1           1         1.0000000
##             617                1           1         1.0000000
##             635                1           0         0.0000000
</pre></div>
</div></div>
        </pre>
      </div>
  
      <!-- BOTONES -->
      <button onclick="mostrarTodo3()" class="sql-btn">Ver todas</button>
      <button onclick="mostrarMenos3()" class="sql-btn" style="display:none;" id="btn_menos_3">Ver menos</button>
    </div>
</section>

<!-- ===================================================== -->
<!--                2.2 LECTURA Y ENTENDIMIENTO           -->
<!-- ===================================================== -->

<section class="card ">
  <h3>Lectura y Entendimiento de los Datos</h3>

  <h4>Lectura del dataset en R</h4>

<div class="chunk" id="unnamed-chunk-7"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl kwd">install.packages</span><span class="hl def">(</span><span class="hl sng">&quot;readr&quot;</span><span class="hl def">)</span>
<span class="hl kwd">library</span><span class="hl def">(readr)</span>
<span class="hl def">clientes</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">read_csv</span><span class="hl def">(</span><span class="hl sng">&quot;../data/raw/Model_creditoPersonal.csv&quot;</span><span class="hl def">)</span>
<span class="hl kwd">cat</span><span class="hl def">(</span><span class="hl sng">&quot;&lt;pre&gt;\n&quot;</span><span class="hl def">,</span> <span class="hl kwd">pretty_sql_table</span><span class="hl def">(</span><span class="hl kwd">head</span><span class="hl def">(clientes)),</span> <span class="hl sng">&quot;\n&lt;/pre&gt;&quot;</span><span class="hl def">)</span>
</pre></div>
</div></div>
  
  <div class="table-container">
<div class="chunk" id="unnamed-chunk-8"><div class="rcode"><div class="output"><pre class="knitr r">## &lt;pre&gt;
##  
## 
##  ID   Age   Experience   Income   ZIP.Code   Family   CCAvg   Education   Mortgage  Personal.Loan   Securities.Account   CD.Account   Online   CreditCard 
## ---  ----  -----------  -------  ---------  -------  ------  ----------  ---------  --------------  -------------------  -----------  -------  -----------
##   1    25            1       49      91107        4     1.6           1          0  NO              SÍ                   NO           NO       NO         
##   2    45           19       34      90089        3     1.5           1          0  NO              SÍ                   NO           NO       NO         
##   3    39           15       11      94720        1     1.0           1          0  NO              NO                   NO           NO       NO         
##   4    35            9      100      94112        1     2.7           2          0  NO              NO                   NO           NO       NO         
##   5    35            8       45      91330        4     1.0           2          0  NO              NO                   NO           NO       SÍ         
##   6    37           13       29      92121        4     0.4           2        155  NO              NO                   NO           SÍ       NO          
## &lt;/pre&gt;
</pre></div>
</div></div>
  </div>


  <h4>Descripción de variables principales</h4>

  <ul>
    <li><strong>Age:</strong> Edad del cliente.</li>
    <li><strong>Income:</strong> Ingreso anual del cliente (miles USD).</li>
    <li><strong>Experience:</strong> Años de experiencia laboral.</li>
    <li><strong>CCAvg:</strong> Gasto promedio mensual con tarjeta de crédito.</li>
    <li><strong>Education:</strong> Nivel escolar (1: No graduado, 2: Graduado, 3: Profesional).</li>
    <li><strong>Mortgage:</strong> Valor hipotecario (miles USD).</li>
    <li><strong>Personal Loan:</strong> Variable objetivo (0 = No, 1 = Sí).</li>
    <li><strong>Online:</strong> Uso de banca digital.</li>
    <li><strong>CreditCard:</strong> Posee tarjeta emitida por otro banco.</li>
  </ul>
  
  <p>
Las variables disponibles permiten capturar tres dimensiones clave del cliente:
<strong>valor económico actual</strong>, <strong>potencial de crecimiento</strong> y
<strong>nivel de vinculación financiera</strong>. Esta combinación habilita un análisis
integral que va más allá de la simple descripción demográfica.
</p>


  <h4>Sobre la fuente de datos</h4>
  <p>El dataset proviene de una campaña real donde se ofreció un préstamo personal a 5,000 clientes del banco. 
  Contiene tanto datos demográficos como financieros, así como la respuesta final del cliente.</p>
</section>

</div>
